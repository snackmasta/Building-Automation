(* Wastewater Treatment Plant - Global Variables *)
VAR_GLOBAL
    (* Digital Inputs *)
    INTAKE_FLOW AT %I0.0 : BOOL;              (* Intake flow switch *)
    OUTFLOW_SENSOR AT %I0.1 : BOOL;           (* Treated water flow *)
    TANK_HIGH_LEVEL AT %I0.2 : BOOL;          (* High level switch *)
    EMERGENCY_STOP AT %I0.3 : BOOL;           (* Emergency stop *)
    SCREEN_CLOG AT %I0.4 : BOOL;              (* Screen clog detection *)
    AERATION_RUNNING AT %I0.5 : BOOL;         (* Aeration status *)
    PUMP_P101_RUNNING AT %I0.6 : BOOL;        (* Primary pump status *)
    PUMP_P102_RUNNING AT %I0.7 : BOOL;        (* Secondary pump status *)
    CHLORINE_LOW AT %I1.0 : BOOL;             (* Chlorine level low *)
    ACID_TANK_LOW AT %I1.1 : BOOL;            (* pH adjustment low *)
    GAS_ALARM AT %I1.2 : BOOL;                (* Gas detection *)
    AUTO_MODE AT %I1.3 : BOOL;                (* Auto mode selection *)
    FILTER_PRESSURE_HIGH AT %I1.4 : BOOL;     (* Filter differential *)
    UV_SYSTEM_RUNNING AT %I1.5 : BOOL;        (* UV disinfection status *)
    SLUDGE_PUMP_RUNNING AT %I1.6 : BOOL;      (* Sludge pump status *)
    MAINTENANCE_MODE AT %I1.7 : BOOL;         (* Maintenance switch *)
    
    (* Digital Outputs *)
    PUMP_P101_START AT %Q0.0 : BOOL;          (* Primary pump start *)
    PUMP_P102_START AT %Q0.1 : BOOL;          (* Secondary pump start *)
    MIXER_M101_START AT %Q0.2 : BOOL;         (* Primary mixer start *)
    MIXER_M102_START AT %Q0.3 : BOOL;         (* Secondary mixer start *)
    SCREEN_FORWARD AT %Q0.4 : BOOL;           (* Screen forward *)
    SCREEN_REVERSE AT %Q0.5 : BOOL;           (* Screen reverse *)
    BLOWER_START AT %Q0.6 : BOOL;             (* Aeration blower *)
    UV_SYSTEM_START AT %Q0.7 : BOOL;          (* UV system start *)
    ACID_DOSING_PUMP AT %Q1.0 : BOOL;         (* Acid dosing *)
    BASE_DOSING_PUMP AT %Q1.1 : BOOL;         (* Base dosing *)
    CHLORINE_DOSING AT %Q1.2 : BOOL;          (* Chlorine dosing *)
    SLUDGE_PUMP_START AT %Q1.3 : BOOL;        (* Sludge pump start *)
    ALARM_BEACON AT %Q1.4 : BOOL;             (* Visual alarm *)
    ALARM_HORN AT %Q1.5 : BOOL;               (* Audible alarm *)
    BACKWASH_VALVE AT %Q1.6 : BOOL;           (* Filter backwash *)
    OUTLET_VALVE AT %Q1.7 : BOOL;             (* Outlet control *)
    
    (* Analog Inputs *)
    INTAKE_FLOW_RATE AT %IW0 : INT;           (* Intake flow meter 0-600m³/h *)
    OUTPUT_FLOW_RATE AT %IW1 : INT;           (* Output flow meter 0-600m³/h *)
    TANK_LEVEL_1 AT %IW2 : INT;               (* Primary tank level 0-5m *)
    TANK_LEVEL_2 AT %IW3 : INT;               (* Secondary tank level 0-5m *)
    PH_VALUE AT %IW4 : INT;                   (* pH measurement 0-14 pH *)
    DISSOLVED_OXYGEN AT %IW5 : INT;           (* DO measurement 0-20mg/L *)
    TURBIDITY AT %IW6 : INT;                  (* Turbidity meter 0-1000NTU *)
    TEMPERATURE AT %IW7 : INT;                (* Process temperature 0-100°C *)
    CONDUCTIVITY AT %IW8 : INT;               (* Conductivity meter 0-5000µS/cm *)
    CHLORINE_RESIDUAL AT %IW9 : INT;          (* Chlorine analyzer 0-10mg/L *)
    POWER_CONSUMPTION AT %IW10 : INT;         (* System power 0-500kW *)
    PRESSURE_SENSOR_1 AT %IW11 : INT;         (* Process pressure 1 0-10bar *)
    
    (* Analog Outputs *)
    PUMP_P101_SPEED AT %QW0 : INT;            (* Primary pump VFD 0-100% *)
    PUMP_P102_SPEED AT %QW1 : INT;            (* Secondary pump VFD 0-100% *)
    BLOWER_SPEED AT %QW2 : INT;               (* Aeration blower VFD 0-100% *)
    ACID_DOSING_RATE AT %QW3 : INT;           (* Acid dosing rate 0-100% *)
    BASE_DOSING_RATE AT %QW4 : INT;           (* Base dosing rate 0-100% *)
    CHLORINE_DOSING_RATE AT %QW5 : INT;       (* Chlorine dose rate 0-100% *)
    MIXER_M101_SPEED AT %QW6 : INT;           (* Primary mixer VFD 0-100% *)
    MIXER_M102_SPEED AT %QW7 : INT;           (* Secondary mixer VFD 0-100% *)
    
    (* System Status Variables *)
    SystemRunning : BOOL;                     (* Overall system running status *)
    SystemFault : BOOL;                       (* System fault status *)
    MaintenanceRequired : BOOL;               (* Maintenance required indicator *)
    BatchProcessing : BOOL;                   (* Batch processing mode active *)
    StormModeActive : BOOL;                   (* Storm water handling mode *)
    
    (* Alarms and Warnings *)
    AlarmActive : BOOL;                       (* Any alarm active *)
    HighPHAlarm : BOOL;                       (* pH too high alarm *)
    LowPHAlarm : BOOL;                        (* pH too low alarm *)
    HighTurbidityAlarm : BOOL;                (* High turbidity alarm *)
    LowOxygenAlarm : BOOL;                    (* Low dissolved oxygen alarm *)
    ChemicalLevelWarning : BOOL;              (* Chemical level warning *)
    GasDetectionAlarm : BOOL;                 (* Hazardous gas detected *)
    
    (* Process Setpoints *)
    PHSetpoint : REAL := 7.0;                 (* pH setpoint (typically 6.5-8.5) *)
    DissolvedOxygenSetpoint : REAL := 5.0;    (* DO setpoint (mg/L) *)
    ChlorineDosageSetpoint : REAL := 2.5;     (* Chlorine dosage setpoint (mg/L) *)
    FlowRateSetpoint : REAL := 300.0;         (* Flow rate setpoint (m³/h) *)
    
    (* Process Variables (scaled) *)
    ScaledPHValue : REAL;                     (* Scaled pH value (0-14) *)
    ScaledDO : REAL;                          (* Scaled dissolved oxygen (mg/L) *)
    ScaledTurbidity : REAL;                   (* Scaled turbidity (NTU) *)
    ScaledFlowRate : REAL;                    (* Scaled flow rate (m³/h) *)
    ScaledTankLevel1 : REAL;                  (* Scaled primary tank level (m) *)
    ScaledTankLevel2 : REAL;                  (* Scaled secondary tank level (m) *)
    ScaledChlorineResidual : REAL;            (* Scaled chlorine residual (mg/L) *)
    
    (* Timers and Counters *)
    BackwashTimer : TON;                      (* Filter backwash timer *)
    ChemicalDosingTimer : TON;                (* Chemical dosing timer *)
    ProcessCycleTimer : TON;                  (* Process cycle timer *)
    MaintenanceCounter : CTU;                 (* Maintenance interval counter *)
    
    (* PID Controllers *)
    PHController : PID;                       (* pH control PID *)
    DOController : PID;                       (* Dissolved oxygen PID *)
    FlowController : PID;                     (* Flow rate PID *)
    ChlorineController : PID;                 (* Chlorine dosing PID *)
    
    (* Statistical Data *)
    TotalFlowToday : REAL;                    (* Daily flow totalization (m³) *)
    TotalChemicalUsage : REAL;                (* Chemical usage (L) *)
    TotalEnergyUsage : REAL;                  (* Energy usage (kWh) *)
    TreatmentEfficiency : REAL;               (* Treatment efficiency (%) *)
    
    (* System Parameters *)
    MAX_FLOW_RATE : REAL := 600.0;            (* Maximum flow rate (m³/h) *)
    MAX_TANK_LEVEL : REAL := 5.0;             (* Maximum tank level (m) *)
    MIN_PH : REAL := 6.0;                     (* Minimum allowable pH *)
    MAX_PH : REAL := 9.0;                     (* Maximum allowable pH *)
    MIN_DO : REAL := 2.0;                     (* Minimum dissolved oxygen (mg/L) *)
    MAX_TURBIDITY : REAL := 100.0;            (* Maximum allowable turbidity (NTU) *)
END_VAR
